<!DOCTYPE html>
<html lang="en-US">
  <title>Jess Whitworth's Page of Random Awesome</title>
  <meta name="description" content="Randomly awesome things I randomly decided to make.">
  <meta name="author" content="Jess Whitworth">
  <meta charset="UTF-8">
  <link rel="stylesheet" type="text/css" href="reset.css">
  <link rel="stylesheet" type="text/css" href="main.css">
  <script src="guildwars.js"></script>
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/1.12.0/jquery.min.js"></script>
  <script>
    var greatestSpread;
    $(document).ready(function(){
      getPrices(displayGreatestSpread);
      $("#loading-progess").text("Selector works in script tag.");
    });
    
    function displayGreatestSpread() {
      var priceSpread = gwPrices.slice(0);
      $("#array-progress").html("Total array items : " + pricesSpread.length);
      priceSpread.forEach(removeNoDemand);
      $("#array-progress").append("<br />Total array items : " + pricesSpread.length);
      priceSpread.forEach(removeNoSupply);
      $("#array-progress").append("<br />Total array items : " + pricesSpread.length);
      priceSpread.forEach(calculateSpread);
      priceSpread.sort(comparePrices);
      greatestSpread = priceSpread[0];
      getItem(greatestSpread.id, displayGreatestSpread2)
    }
    function displayGreatestSpread2(item) {
      $("#item-name-GS").text(item.name);
      $("#item-icon-GS").attr("src", item.icon);
      $("#item-icon-GS").attr("alt", item.name + "'s Icon");
      $("#buy-price-GS").text(greatestSpread.buys.unit_price);
      $("#sell-price-GS").text(greatestSpread.sells.unit_price);
    }
  </script>
  <body>
    <h1>Jess Whitworth's Page of Random Awesome</h1>
    <p id="loading-progress">Loading Guid Wars 2 Trading Post Data</p>
    <p id="array-progress"></p>
    <div class="info item">
      <h1 id="item-name-GS"></h1>
      <img src="#" alt="" id="item-icon-GS"/>
      <dl>
        <dt>Buy Price</dt>
        <dd id="buy-price-GS"></dd>
        <dt>Sell Price</dt>
        <dd id="sell-price-GS"></dd>
      </dl>
    </div>
  </body>
</html>
